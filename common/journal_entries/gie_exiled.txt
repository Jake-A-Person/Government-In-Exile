je_gie_civ_war = {
	icon = "gfx/interface/icons/event_icons/event_election.dds"
	
   group = je_group_internal_affairs

	is_shown_when_inactive = {
		country_rank >= rank_value:major_power
		is_in_civil_war = yes

		#comunist civ war
		#not = {has_law = law_type:law_council_republic} 

		is_at_war = yes

		any_diplomatic_play = {
			is_diplomatic_play_type = dp_revolution
			target = root
			# initiator = {
			# 	has_law = law_type:law_council_republic
			# }
			count > 0
		}	}
   
	possible = {
	}

   immediate = {
   }

	complete = {
		is_at_war = no
		is_diplomatic_play_committed_participant = no
	}

	fail = {
		custom_tooltip = {
			text = ct_PLACE_HOLDER
			any_diplomatic_play = {
				is_diplomatic_play_type = dp_revolution
				target_is = root

				war = {
						has_war_support = {
						target = root
						value < -75
						}
					}
			count > 0
			}
		}
	}

	on_fail = {
		trigger_event = gie_exiled.1
	}
	
	on_complete = {
		
	}
	
	current_value = {

	}

	goal_add_value = {

	}

	weight = 10000
}

je_gie_retreat = {
	icon = "gfx/interface/icons/event_icons/event_election.dds"
	
   group = je_group_internal_affairs

	is_shown_when_inactive = {
	}
   
	possible = {
	}

   immediate = {
		change_subject_type = subject_type_protectorate
   
		
		overlord = {
			every_subject_or_below = {
				limit = {
					overlord = prev
					not = { this = root }
				}
				make_independent = yes
				root = {
					create_diplomatic_pact = {
						country = prev
						type = dominion
					}
				}
				add_modifier = {
					name = collapse_of_imp
					years = 20
					is_decaying = yes
				}
			}



			random_diplomatic_play = {
				limit = {
					is_diplomatic_play_type = dp_revolution
					target_is = prev
					war = {
						has_war_support = {
						target = prevprev
						value < -75
						}
					}
				}
				war = {
					add_war_war_support = {
						target = prevprev
						value = -200
					}
				}
			}
		}
		add_modifier = {
			name = collapse_of_imp
			years = 20
			is_decaying = yes
		}
	}

	complete = {
		is_at_war = no
	}

	fail = {
	}

	on_fail = {

	}
	
	on_complete = {
		overlord = {
		add_journal_entry = {
			type = je_gie_comie_nation
		}
		}
		add_journal_entry = {
			type = je_gie_return
		}
		add_journal_entry = {
			type = je_gie_annex_overseas_com
		}
		make_independent = yes
	}
	
	current_value = {

	}

	goal_add_value = {

	}

	progressbar = yes

	weight = 10000
	
}

je_gie_annex_overseas_com = {
	icon = "gfx/interface/icons/event_icons/event_election.dds"
	
	group = je_group_internal_affairs
 
	 is_shown_when_inactive = {
	 }

	
	 possible = {
	 }
 
	immediate = {
		overlord = {
			save_scope_as = return_target
			add_modifier = {
				name = nuke_convoys
			}
		}
		scope:return_target = {
			add_modifier = {
				name = nuke_convoys
			}
		}
	}

	timeout = 10

	complete = {
	 }
 
	 fail = {
	 }
 
	 on_fail = {
 
	 }
	 
	 on_timeout = {
		scope:return_target = {
			every_state = {
				limit = {
					owner = prev
					market_access = 0
					not = {
						state_region = {
							is_homeland = irish
						}
					}
				}
				set_state_owner = root
			}
			remove_modifier = nuke_convoys
		}
	 }
	 
	 current_value = {
 
	 }
 
	 goal_add_value = {
 
	 }
 
	 progressbar = yes
 
	 weight = 10000
 
}


je_gie_return = {
	icon = "gfx/interface/icons/event_icons/event_election.dds"
	
   group = je_group_internal_affairs

	is_shown_when_inactive = {
	}
   
	possible = {
	}

   immediate = {
		overlord = {
			save_scope_as = return_target
		}
		#irish war
		if = {
			limit = { 
				any_state = {
					owner = scope:return_target
					state_region = {
						is_homeland = irish
					}
					count > 0
				}
			}
			scope:return_target = {
				trigger_event = gie_exiled.3
			}
		}
   }

	complete = {
		any_country = {
			has_diplomatic_pact = {
				who = root
				type = gie_return_target
			}
			root = {
				has_diplomatic_pact = {
					who = prev
					type = humiliation
				}

				or = {
					and = {
						has_law = law_type:law_monarchy
						prev = {
							has_law = law_type:law_monarchy
						}
					}
					and = {
						has_law = law_type:law_presidential_republic
						prev = {
							has_law = law_type:law_presidential_republic
						}
					}
					and = {
						has_law = law_type:law_parliamentary_republic
						prev = {
							has_law = law_type:law_parliamentary_republic
						}
					}
					and = {
						has_law = law_type:law_council_republic
						prev = {
							has_law = law_type:law_council_republic
						}
					}
					and = {
						has_law = law_type:law_theocracy
						prev = {
							has_law = law_type:law_theocracy
						}
					}
				}
			}
			count > 0	
		}
	}
	
	scripted_button = je_gie_return_sb
	#add war goals if in diplo-play
	scripted_button = je_gie_return_in_diplo_sb

	fail = {
		is_subject_of = scope:return_target
	}

	on_fail = {
		copy_laws = overlord
	}
	
	on_complete = {
		scope:return_target = {
			copy_laws = root
			create_diplomatic_pact = {
				country = root
				type = puppet
			}
		}
		ruler = {
			transfer_character = scope:return_target
			set_character_as_ruler = yes
		}
		play_as = scope:return_target
	}
	
	current_value = {

	}

	goal_add_value = {

	}


	#civl war nation switch check
	on_weekly_pulse = {
		effect = {
			scope:return_target = {
				create_diplomatic_pact = {
					country = root
					type = gie_return_target
				}
			}
			# if = {
			# 	limit = {
			# 		not = {
			# 			exists = scope:return_target
			# 		}
			# 	}
			# 	#i found the thing
			# 		#save_scope_as = return_target
			# 	random_country = {
			# 		limit = {
			# 			has_modifier = civil_war_winner_pointer
			# 		}	
			# 		#clear_saved_scope = return_target
			# 		save_scope_as = return_target
			# 		remove_modifier = civil_war_winner_pointer
			# 		remove_modifier = civil_war_winner_pointer
			# 	}
			# }
		}
	}

	progressbar = yes

	weight = 10000

}

je_gie_return_war = {
	icon = "gfx/interface/icons/event_icons/event_election.dds"
	
   group = je_group_internal_affairs

	is_shown_when_inactive = {
	}
   
	possible = {
	}

   immediate = {
   }

	complete = {
		is_at_war = no
		is_diplomatic_play_committed_participant = no
	}
	
	on_complete = {
		remove_variable = return_war
	}
	
	weight = 0

}

je_gie_comie_nation = {
	icon = "gfx/interface/icons/event_icons/event_election.dds"
	
   group = je_group_internal_affairs

	is_shown_when_inactive = {
	}
   
	possible = {
	}

   immediate = {

	}


	fail = {
	}

	on_fail = {
	}
	
	on_complete = {
	}
	
	current_value = {

	}

	goal_add_value = {

	}

	on_monthly_pulse = {
		effect = {
			random_diplomatic_play = {
				limit = {
					target = root
					is_diplomatic_play_type = dp_revolution
					initiator = {
						not = {
							has_modifier = civil_war_winner_pointer
						}
					}
				}
				initiator = {
					add_modifier = {
						name = civil_war_winner_pointer
					}
					add_modifier = {
						name = civil_war_winner_pointer
					}
				}
			}		
		}
	}

	weight = 10000

}



#minority affrican ruled nation
je_gie_africa_union = {
	icon = "gfx/interface/icons/event_icons/event_election.dds"
	
   group = je_group_internal_affairs

	is_shown_when_inactive = {
	}
   
	possible = {

	}

   immediate = {
   }

	complete = {
	}

	scripted_button = je_gie_africa_union_sb

	fail = {
		is_subject = yes
	}

	on_fail = {
	}
	
	on_complete = {
	}
	
	current_value = {

	}

	goal_add_value = {

	}

	on_weekly_pulse = {
	}

	progressbar = yes

	weight = 10000

}

je_gie_africa_reform_1 = {
	icon = "gfx/interface/icons/event_icons/event_election.dds"
	
   group = je_group_internal_affairs

   is_shown_when_inactive = {
	}
   
	possible = {
	}

   immediate = {
	add_modifier = {
		name = exiled_africa_reform_0
	}
   }

	complete = {
		not = {
			has_law = law_type:law_slave_trade
			has_law = law_type:law_debt_slavery
			has_law = law_type:law_serfdom
			has_law = law_type:law_traditionalism
			has_law = law_type:law_industry_banned
		}
	}

	fail = {
	}

	on_fail = {
	}
	
	on_complete = {
		add_loyalists = {
			value = small_radicals
		}
		add_modifier = {
			name = exiled_africa_reform_1
		}
		remove_modifier = exiled_africa_reform_0
		add_journal_entry = {
			type = je_gie_africa_reform_2
		}
	}
	
	current_value = {

	}

	goal_add_value = {

	}

	progressbar = yes

	weight = 10000

}

je_gie_africa_reform_2 = {

	icon = "gfx/interface/icons/event_icons/event_election.dds"
	
	group = je_group_internal_affairs
 
	 #check if an affrican colonial administration and gov in exile
	 is_shown_when_inactive = {

	 }
	
	 possible = {
	 }
 
	immediate = {
	}
 
	 complete = {
		has_law = law_type:law_slavery_banned
		or = {
			has_law = law_type:law_interventionism
			has_law = law_type:law_laissez_faire
			has_law = law_type:law_command_economy
			has_law = law_type:law_cooperative_ownership
		}
		or = {
			has_law = law_type:law_homesteading
			has_law = law_type:law_commercialized_agriculture
		}
	 }
 
	 fail = {
	 }
 
	 on_fail = {
	 }
	 
	 on_complete = {			
		 add_loyalists = {
			 value = small_radicals
		 }
		 add_modifier = {
			 name = exiled_africa_reform_2
		 }
		 remove_modifier = exiled_africa_reform_1

		 add_journal_entry = {
			 type = je_gie_africa_reform_3
		 }
		 create_character = {
			female = no
			religion = scope:state_religion_scope
			ruler = no
			heir = no
			age = 26
			ideology = ideology_humanitarian
			interest_group = ig_intelligentsia
			ig_leader = yes
		}
	 }
	 
	 current_value = {
 
	 }
 
	 goal_add_value = {
 
	 }
 
	 progressbar = yes
 
	 weight = 10000
 
}

je_gie_africa_reform_3 = {

	icon = "gfx/interface/icons/event_icons/event_election.dds"
	
	group = je_group_internal_affairs
 
	 #check if an affrican colonial administration and gov in exile
	 is_shown_when_inactive = {

	 }
	
	 possible = {
	 }
 
	immediate = {
	}
 
	 complete = {
		has_law = law_type:law_multicultural
	 }
 
	 fail = {
	 }
 
	 on_fail = {
	 }
	 
	 on_complete = {			
		 add_loyalists = {
			 value = medium_radicals
		 }
		 remove_modifier = exiled_africa_reform_2
	 }
	 
	 current_value = {
 
	 }
 
	 goal_add_value = {
 
	 }
 
	 progressbar = yes
 
	 weight = 10000
 
}

je_gie_africa_assim = {
	icon = "gfx/interface/icons/event_icons/event_election.dds"
	
	group = je_group_internal_affairs

	is_shown_when_inactive = {
	}
   
	possible = {

	}

   immediate = {
	random_primary_culture = {
		save_scope_as = primary_culture_scope
	}
   }

	complete = {
	}

	scripted_button = je_gie_africa_assim_on_sb

	scripted_button = je_gie_africa_assim_off_sb

	fail = {
	}

	on_fail = {
	}
	
	on_complete = {
	}
	
	current_value = {

	}

	goal_add_value = {

	}

	on_weekly_pulse = {
		effect = {
			if = {
				limit = {
					has_modifier = africa_assim
				}
				every_scope_pop = {
					limit = {
						pop_is_discriminated = yes
					}
					change_pop_culture = {
						target = scope:primary_culture_scope
						#0.05% per week -> 2.6%(ish) per year 
						value = 0.0005
					}
				}
			}
		}
	}
}



# je_gie_test = {

# 	icon = "gfx/interface/icons/event_icons/event_election.dds"
	
# 	group = je_group_internal_affairs
 

# 	is_shown_when_inactive = {
# 		always = yes
# 	}

# 	possible = { 
# 		country_rank >= rank_value:major_power
# 		any_subject_or_below = {
# 			is_subject_of = root
# 			count > 0
# 		}
# 	}

# 	immediate = {
# 		trigger_event = gie_exiled.1
# 	}
# }